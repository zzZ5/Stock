# è¶‹åŠ¿é›·è¾¾é€‰è‚¡ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

è¶‹åŠ¿é›·è¾¾é€‰è‚¡ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºŽæŠ€æœ¯åˆ†æžçš„é‡åŒ–é€‰è‚¡å¹³å°ï¼Œæ”¯æŒç­–ç•¥å›žæµ‹ã€å‚æ•°ä¼˜åŒ–ã€Walk-ForwardéªŒè¯ç­‰å®Œæ•´é‡åŒ–åˆ†æžåŠŸèƒ½ã€‚é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œç»“æž„æ¸…æ™°ï¼Œä¾¿äºŽç»´æŠ¤å’Œæ‰©å±•ã€‚

## åŠŸèƒ½ç‰¹æ€§

- **æ™ºèƒ½é€‰è‚¡**: åŸºäºŽå¤šå› å­æŠ€æœ¯æŒ‡æ ‡çš„æ™ºèƒ½é€‰è‚¡ç³»ç»Ÿ
- **åŽ†å²å›žæµ‹**: å®Œæ•´çš„å›žæµ‹å¼•æ“Žï¼Œæ”¯æŒæ»‘ç‚¹ã€æ‰‹ç»­è´¹ã€å¤šç§æ­¢æŸæœºåˆ¶
- **å‚æ•°ä¼˜åŒ–**: ç½‘æ ¼æœç´¢ã€è´å¶æ–¯ä¼˜åŒ–ã€Walk-Forwardåˆ†æž
- **é£Žé™©ç®¡ç†**: å¤šé‡æ­¢æŸç­–ç•¥ï¼ˆç¡¬æ­¢æŸã€ATRæ­¢æŸã€ä¿æœ¬æ­¢ç›ˆï¼‰
- **æŠ€æœ¯æŒ‡æ ‡**: 60+ç§æŠ€æœ¯æŒ‡æ ‡ï¼ˆè¶‹åŠ¿ã€åŠ¨é‡ã€æˆäº¤é‡ã€éœ‡è¡ã€é«˜çº§å‡çº¿ã€å½¢æ€è¯†åˆ«ç­‰ï¼‰
- **æŠ¥å‘Šç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„Markdownæ ¼å¼æŠ¥å‘Š
- **æ—¥å¿—ç³»ç»Ÿ**: å®Œæ•´çš„æ—¥å¿—è®°å½•å’Œè¿½è¸ªåŠŸèƒ½
- **å›¾è¡¨å¯è§†åŒ–**: ä¸°å¯Œçš„å›¾è¡¨ç»˜åˆ¶åŠŸèƒ½ï¼ˆKçº¿å›¾ã€æŒ‡æ ‡å›¾ã€å›žæµ‹å›¾ã€å‚æ•°åˆ†æžå›¾ï¼‰
- **é…ç½®ç®¡ç†**: æ”¯æŒYAML/JSONæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œçµæ´»çš„é…ç½®ç®¡ç†
- **ç¼“å­˜ä¼˜åŒ–**: LRUç¼“å­˜ã€åŒçº§ç¼“å­˜ã€è‡ªåŠ¨è¿‡æœŸã€GzipåŽ‹ç¼©
- **å¹¶å‘å¤„ç†**: çº¿ç¨‹æ± ã€ä»¤ç‰Œæ¡¶é™æµã€æ‰¹é‡å¤„ç†ã€è‡ªåŠ¨é‡è¯•
- **å‘é‡åŒ–å›žæµ‹**: ä½¿ç”¨NumPy/pandaså‘é‡åŒ–è®¡ç®—ï¼Œå¤§å¹…æå‡å›žæµ‹æ€§èƒ½
- **å¹¶è¡Œå›žæµ‹**: æ”¯æŒå¤šå‚æ•°å¹¶è¡Œå›žæµ‹ï¼ŒåŠ é€Ÿå‚æ•°ä¼˜åŒ–è¿‡ç¨‹
- **å•å…ƒæµ‹è¯•**: å®Œæ•´çš„æµ‹è¯•æ¡†æž¶å’Œæµ‹è¯•ç”¨ä¾‹
- **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„ç›®å½•ç»“æž„ï¼Œä¾¿äºŽç»´æŠ¤å’Œæ‰©å±•

## å®‰è£…

```bash
pip install -r requirements.txt
```

## å¿«é€Ÿå¼€å§‹

### æ–¹å¼1ï¼šäº¤äº’å¼èœå•ï¼ˆæŽ¨èæ–°æ‰‹ï¼‰
```bash
python runners/interactive_menu.py
```

### æ–¹å¼2ï¼šå‘½ä»¤è¡Œæ–¹å¼
```bash
# ä½¿ç”¨é»˜è®¤é…ç½®è¿è¡Œ
python runners/trend_radar_main.py

# è‡ªå®šä¹‰å‚æ•°
python runners/trend_radar_main.py --top-n 10 --index-code 000905.SH --holding-days 10
```

### å…¶ä»–åŠŸèƒ½
```bash
# åŽ†å²å›žæµ‹
python runners/backtest_runner.py

# å‚æ•°ä¼˜åŒ–
python runners/optimizer_runner.py
```

## æ–‡æ¡£å¯¼èˆª

### ðŸ“– ä¸»è¦æ–‡æ¡£

1. **[DOCUMENTATION.md](DOCUMENTATION.md)** - å®Œæ•´æ–‡æ¡£ç´¢å¼• â­æŽ¨è
   - å¿«é€Ÿå¼€å§‹æŒ‡å—
   - ç”¨æˆ·æ‰‹å†Œ
   - æ ¸å¿ƒåŠŸèƒ½æ–‡æ¡£
   - ä¼˜åŒ–ä¸Žè¿›é˜¶
   - æµ‹è¯•æ–‡æ¡£

2. **[README.md](README.md)** - é¡¹ç›®è¯´æ˜Žï¼ˆæœ¬æ–‡æ¡£ï¼‰
   - é¡¹ç›®ç®€ä»‹
   - åŠŸèƒ½ç‰¹æ€§
   - å¿«é€Ÿå¼€å§‹
   - é¡¹ç›®ç»“æž„

### ðŸ“š å½’æ¡£æ–‡æ¡£

å·²å½’æ¡£çš„æ—§æ–‡æ¡£å¯ä»¥åœ¨ [ARCHIVE/ARCHIVED_DOCS.md](ARCHIVE/ARCHIVED_DOCS.md) æŸ¥çœ‹ã€‚è¿™äº›æ–‡æ¡£å·²æ•´åˆåˆ° DOCUMENTATION.md ä¸­ã€‚

## é…ç½®å‚æ•°

ç³»ç»Ÿæ”¯æŒä¸¤ç§é…ç½®æ–¹å¼ï¼š

### æ–¹å¼1ï¼šä½¿ç”¨é…ç½®æ–‡ä»¶ï¼ˆæŽ¨èï¼‰

ä½¿ç”¨ YAML æˆ– JSON é…ç½®æ–‡ä»¶ï¼š

```python
from app_config import Config

# åŠ è½½é…ç½®æ–‡ä»¶
Config.load('config.yaml')  # æˆ– 'config.json'

# èŽ·å–é…ç½®å€¼
top_n = Config.get('TOP_N')
log_level = Config.get('LOG_LEVEL')

# è¿è¡Œæ—¶è®¾ç½®ï¼ˆä»…å†…å­˜ç”Ÿæ•ˆï¼‰
Config.set('TOP_N', 30)
```

### æ–¹å¼2ï¼šç¼–è¾‘é…ç½®æ–‡ä»¶

ç¼–è¾‘ `config.yaml` æˆ– `config.json` æ–‡ä»¶ï¼š

```yaml
# é€‰è‚¡ç­–ç•¥å‚æ•°
TOP_N: 20                      # è¿”å›žTopNå€™é€‰è‚¡ç¥¨
BREAKOUT_N: 60                 # 60æ—¥çªç ´
MA_FAST: 20                    # å¿«é€Ÿå‡çº¿
MA_SLOW: 60                    # æ…¢é€Ÿå‡çº¿
VOL_CONFIRM_MULT: 1.2          # æ”¾é‡ç¡®è®¤é˜ˆå€¼
RSI_MAX: 80                    # è¿‡çƒ­è¿‡æ»¤é˜ˆå€¼

# é£Žé™©å‚æ•°
MAX_LOSS_PCT: 0.10            # -10%ç¡¬æ­¢æŸ
ATR_MULT: 2.5                  # æ³¢åŠ¨æ­¢æŸå€æ•°

# æ—¥å¿—é…ç½®
LOG_LEVEL: "INFO"              # æ—¥å¿—çº§åˆ« (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_DIR: "./logs"              # æ—¥å¿—æ–‡ä»¶ç›®å½•
LOG_CONSOLE_OUTPUT: true       # æ˜¯å¦è¾“å‡ºåˆ°æŽ§åˆ¶å°
LOG_FILE_OUTPUT: true          # æ˜¯å¦è¾“å‡ºåˆ°æ–‡ä»¶
LOG_MAX_FILE_SIZE: 10485760   # å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼ˆå­—èŠ‚ï¼‰
LOG_BACKUP_COUNT: 5            # ä¿ç•™çš„æ—¥å¿—æ–‡ä»¶å¤‡ä»½æ•°é‡
```

### ç”Ÿæˆé…ç½®æ¨¡æ¿

```python
from app_config import generate_config_template

# ç”Ÿæˆ YAML æ¨¡æ¿
generate_config_template('my_config.yaml', format='yaml')

# ç”Ÿæˆ JSON æ¨¡æ¿
generate_config_template('my_config.json', format='json')
```

## é¡¹ç›®ç»“æž„

```
Stock/
â”œâ”€â”€ config/                 # é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ settings.py         # å…¨å±€é…ç½®å‚æ•°
â”‚
â”œâ”€â”€ core/                   # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ data_fetcher.py     # æ•°æ®èŽ·å–ï¼ˆTushare APIï¼‰
â”‚   â”œâ”€â”€ cache_manager.py    # ç¼“å­˜ç®¡ç†
â”‚   â”œâ”€â”€ logger.py           # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ validators.py       # æ•°æ®éªŒè¯å’Œå¼‚å¸¸å¤„ç†
â”‚   â””â”€â”€ utils.py            # å·¥å…·å‡½æ•°ï¼ˆé™æµå™¨ã€è¿›åº¦è¿½è¸ªï¼‰

â”œâ”€â”€ logs/                   # æ—¥å¿—æ–‡ä»¶ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ visualization/          # å¯è§†åŒ–æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ plotter.py          # å›¾è¡¨ç»˜åˆ¶ï¼ˆKçº¿å›¾ã€æŒ‡æ ‡å›¾ã€å›žæµ‹å›¾ã€å‚æ•°åˆ†æžå›¾ï¼‰
â”‚
â”œâ”€â”€ tests/                  # æµ‹è¯•æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_indicators.py  # æŠ€æœ¯æŒ‡æ ‡æµ‹è¯•
â”‚   â”œâ”€â”€ test_config.py     # é…ç½®æµ‹è¯•
â”‚   â”œâ”€â”€ test_logger.py     # æ—¥å¿—ç³»ç»Ÿæµ‹è¯•
â”‚   â”œâ”€â”€ test_validators.py # æ•°æ®éªŒè¯æµ‹è¯•
â”‚   â””â”€â”€ test_visualization.py  # å¯è§†åŒ–æ¨¡å—æµ‹è¯•
â”‚
â”œâ”€â”€ indicators/             # æŠ€æœ¯æŒ‡æ ‡æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ indicators.py       # 30+ç§æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
â”‚
â”œâ”€â”€ strategy/               # ç­–ç•¥æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ strategy.py         # é€‰è‚¡ç­–ç•¥é€»è¾‘
â”‚   â””â”€â”€ stock_query.py      # è‚¡ç¥¨ä¿¡æ¯æŸ¥è¯¢
â”‚
â”œâ”€â”€ analysis/               # åˆ†æžæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ backtest.py         # å›žæµ‹å¼•æ“Ž
â”‚   â”œâ”€â”€ backtest_vectorized.py # å‘é‡åŒ–å›žæµ‹å¼•æ“Ž
â”‚   â”œâ”€â”€ optimizer.py        # å‚æ•°ä¼˜åŒ–å™¨
â”‚   â””â”€â”€ reporter.py         # æŠ¥å‘Šç”Ÿæˆ
â”‚
â”œâ”€â”€ runners/                # è¿è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ interactive_menu.py # äº¤äº’å¼èœå•ï¼ˆæŽ¨èï¼‰
â”‚   â”œâ”€â”€ trend_radar_main.py # ä¸»ç¨‹åºï¼ˆæ•´åˆç‰ˆï¼‰
â”‚   â”œâ”€â”€ backtest_runner.py  # å›žæµ‹è¿è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ backtest_demo.py    # å›žæµ‹æ¼”ç¤º
â”‚   â””â”€â”€ optimizer_runner.py # å‚æ•°ä¼˜åŒ–è„šæœ¬
â”‚
â”œâ”€â”€ ARCHIVE/                # å½’æ¡£æ–‡æ¡£
â”‚   â””â”€â”€ ARCHIVED_DOCS.md    # å·²å½’æ¡£æ–‡æ¡£ç´¢å¼•
â”‚
â”œâ”€â”€ cache/                  # ç¼“å­˜ç›®å½•
â”‚   â”œâ”€â”€ trade_cal/          # äº¤æ˜“æ—¥åŽ†ç¼“å­˜
â”‚   â”œâ”€â”€ stock_basic/        # è‚¡ç¥¨åŸºç¡€ä¿¡æ¯ç¼“å­˜
â”‚   â”œâ”€â”€ daily/              # æ—¥çº¿æ•°æ®ç¼“å­˜
â”‚   â””â”€â”€ index/              # æŒ‡æ•°æ•°æ®ç¼“å­˜
â”‚
â”œâ”€â”€ reports/                # æŠ¥å‘Šç›®å½•
â”‚
â”œâ”€â”€ requirements.txt        # ä¾èµ–åŒ…
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜Žï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”œâ”€â”€ DOCUMENTATION.md       # å®Œæ•´æ–‡æ¡£ç´¢å¼•ï¼ˆæŽ¨èæŸ¥é˜…ï¼‰
â””â”€â”€ __init__.py            # åŒ…åˆå§‹åŒ–
```

## æ¨¡å—è¯´æ˜Ž

### config - é…ç½®æ¨¡å—
é›†ä¸­ç®¡ç†æ‰€æœ‰é…ç½®å‚æ•°ï¼š
- é€‰è‚¡å‚æ•°ï¼ˆçªç ´å‘¨æœŸã€å‡çº¿å‘¨æœŸç­‰ï¼‰
- å›žæµ‹å‚æ•°ï¼ˆæ­¢ç›ˆæ­¢æŸã€æ‰‹ç»­è´¹ç­‰ï¼‰
- APIé…ç½®ï¼ˆç¼“å­˜æ—¶é—´ã€é™æµè®¾ç½®ç­‰ï¼‰

### core - æ ¸å¿ƒæ¨¡å—
- **DataFetcher**: ä»ŽTushareèŽ·å–è‚¡ç¥¨æ•°æ®ï¼Œæ”¯æŒç¼“å­˜å’Œæ•°æ®éªŒè¯
- **CacheManager**: ç®¡ç†æ•°æ®ç¼“å­˜ï¼Œè‡ªåŠ¨è¿‡æœŸ
- **RateLimiter**: APIè°ƒç”¨é™æµå™¨
- **ProgressTracker**: è¿›åº¦è¿½è¸ªå™¨
- **Logger**: æ—¥å¿—ç³»ç»Ÿï¼Œæ”¯æŒå¤šçº§åˆ«æ—¥å¿—è®°å½•å’Œæ–‡ä»¶è¾“å‡º
- **Validators**: æ•°æ®éªŒè¯å™¨å’Œå®‰å…¨è®¡ç®—å·¥å…·
  - DataFrameéªŒè¯ï¼ˆåˆ—æ£€æŸ¥ã€ç±»åž‹æ£€æŸ¥ã€è¡Œæ•°éªŒè¯ï¼‰
  - ä»·æ ¼æ•°æ®éªŒè¯ï¼ˆOHLCæœ‰æ•ˆæ€§ã€æ­£æ•°æ£€æŸ¥ï¼‰
  - æ—¥æœŸéªŒè¯ï¼ˆæ ¼å¼ã€èŒƒå›´ã€äº¤æ˜“æ—¥åˆ—è¡¨ï¼‰
  - å‚æ•°éªŒè¯ï¼ˆæ­£æ•°ã€ç™¾åˆ†æ¯”ã€æ•´æ•°ã€å‘¨æœŸï¼‰
  - é…ç½®éªŒè¯ï¼ˆå›žæµ‹é…ç½®ï¼‰
  - å®‰å…¨è®¡ç®—ï¼ˆé˜²é™¤é›¶ã€ç™¾åˆ†æ¯”å˜åŒ–ã€æ•°å€¼é™åˆ¶ï¼‰

### indicators - æŠ€æœ¯æŒ‡æ ‡æ¨¡å—
æä¾›30+ç§æŠ€æœ¯æŒ‡æ ‡è®¡ç®—ï¼š

**è¶‹åŠ¿ç±»æŒ‡æ ‡ï¼š**
- SMA/EMAï¼ˆç®€å•/æŒ‡æ•°ç§»åŠ¨å¹³å‡ï¼‰
- MACDï¼ˆç§»åŠ¨å¹³å‡æ”¶æ•›å‘æ•£ï¼‰
- ADXï¼ˆå¹³å‡è¶‹å‘æŒ‡æ ‡ï¼‰
- Parabolic SARï¼ˆæŠ›ç‰©çº¿è½¬å‘ï¼‰
- Vortexï¼ˆæ¼©æ¶¡æŒ‡æ ‡ï¼‰
- TRIXï¼ˆä¸‰é‡æŒ‡æ•°å¹³æ»‘å¹³å‡çº¿ï¼‰

**åŠ¨é‡ç±»æŒ‡æ ‡ï¼š**
- RSIï¼ˆç›¸å¯¹å¼ºå¼±æŒ‡æ ‡ï¼‰
- KDJï¼ˆéšæœºæŒ‡æ ‡ï¼‰
- Williams %Rï¼ˆå¨å»‰æŒ‡æ ‡ï¼‰
- CCIï¼ˆé¡ºåŠ¿æŒ‡æ ‡ï¼‰
- Momentumï¼ˆåŠ¨é‡ï¼‰
- ROCï¼ˆå˜åŒ–çŽ‡ï¼‰
- DPOï¼ˆåŽ»è¶‹åŠ¿ä»·æ ¼æŒ¯è¡ï¼‰
- Stochastic RSIï¼ˆéšæœºRSIï¼‰
- Fisher Transformï¼ˆFisherå˜æ¢ï¼‰

**æˆäº¤é‡ç±»æŒ‡æ ‡ï¼š**
- OBVï¼ˆèƒ½é‡æ½®ï¼‰
- MFIï¼ˆèµ„é‡‘æµé‡æŒ‡æ ‡ï¼‰
- VPTï¼ˆé‡ä»·è¶‹åŠ¿ï¼‰
- VWAPï¼ˆæˆäº¤é‡åŠ æƒå¹³å‡ä»·ï¼‰

**æ³¢åŠ¨çŽ‡ç±»æŒ‡æ ‡ï¼š**
- ATRï¼ˆå¹³å‡çœŸå®žæ³¢å¹…ï¼‰
- Bollinger Bandsï¼ˆå¸ƒæž—å¸¦ï¼‰
- Chandelier Exitï¼ˆåŠç¯æ­¢æŸï¼‰

**å…¶ä»–æŒ‡æ ‡ï¼š**
- ä»·æ ¼ä½ç½®æŒ‡æ ‡
- æ³¢åŠ¨çŽ‡æ¯”çŽ‡
- é‡ä»·è¶‹åŠ¿

### strategy - ç­–ç•¥æ¨¡å—
- **StockStrategy**: ä¸»é€‰è‚¡ç­–ç•¥ç±»
- **query_stock_industry**: æŸ¥è¯¢è‚¡ç¥¨è¡Œä¸šä¿¡æ¯
- **query_stock_detail**: æŸ¥è¯¢è‚¡ç¥¨è¯¦ç»†ä¿¡æ¯

### analysis - åˆ†æžæ¨¡å—
- **BacktestEngine**: å›žæµ‹å¼•æ“Žï¼Œæ”¯æŒå¤šä»“ä½ç®¡ç†
  - æ»‘ç‚¹æ¨¡æ‹Ÿ
  - æ‰‹ç»­è´¹è®¡ç®—
  - å¤šé‡æ­¢æŸæœºåˆ¶ï¼ˆç¡¬æ­¢æŸã€ATRæ­¢æŸã€ä¿æœ¬æ­¢ç›ˆï¼‰
  - æ­¢ç›ˆç­–ç•¥
  - æœ€å¤§æŒä»“å¤©æ•°é™åˆ¶

- **ParameterOptimizer**: å‚æ•°ä¼˜åŒ–å™¨
  - ç½‘æ ¼æœç´¢ä¼˜åŒ–
  - Walk-Forwardæ»šåŠ¨éªŒè¯
  - è´å¶æ–¯ä¼˜åŒ–ï¼ˆéšæœºæœç´¢å®žçŽ°ï¼‰
  - å‚æ•°æ•æ„Ÿæ€§åˆ†æž

- **Reporter**: MarkdownæŠ¥å‘Šç”Ÿæˆå™¨
  - é€‰è‚¡æŠ¥å‘Š
  - å›žæµ‹æŠ¥å‘Š
  - å‚æ•°ä¼˜åŒ–æŠ¥å‘Š
  - Walk-Forwardåˆ†æžæŠ¥å‘Š

### runners - è¿è¡Œè„šæœ¬
- **trend_radar_main.py**: æ‰§è¡Œå•æ—¥é€‰è‚¡
- **backtest_runner.py**: æ‰§è¡ŒåŽ†å²å›žæµ‹
- **optimizer_runner.py**: æ‰§è¡Œå‚æ•°ä¼˜åŒ–

## æŠ€æœ¯æŒ‡æ ‡å®Œæ•´åˆ—è¡¨

| åˆ†ç±» | æŒ‡æ ‡ | è¯´æ˜Ž |
|------|------|------|
| è¶‹åŠ¿ | SMA/EMA | ç§»åŠ¨å¹³å‡çº¿ |
| è¶‹åŠ¿ | MACD | ç§»åŠ¨å¹³å‡æ”¶æ•›å‘æ•£ |
| è¶‹åŠ¿ | ADX | å¹³å‡è¶‹å‘æŒ‡æ ‡ |
| è¶‹åŠ¿ | Parabolic SAR | æŠ›ç‰©çº¿è½¬å‘ |
| è¶‹åŠ¿ | Vortex | æ¼©æ¶¡æŒ‡æ ‡ |
| è¶‹åŠ¿ | TRIX | ä¸‰é‡æŒ‡æ•°å¹³æ»‘å¹³å‡çº¿ |
| åŠ¨é‡ | RSI | ç›¸å¯¹å¼ºå¼±æŒ‡æ ‡ |
| åŠ¨é‡ | KDJ | éšæœºæŒ‡æ ‡ |
| åŠ¨é‡ | Williams %R | å¨å»‰æŒ‡æ ‡ |
| åŠ¨é‡ | CCI | é¡ºåŠ¿æŒ‡æ ‡ |
| åŠ¨é‡ | Momentum | åŠ¨é‡æŒ‡æ ‡ |
| åŠ¨é‡ | ROC | å˜åŒ–çŽ‡æŒ‡æ ‡ |
| åŠ¨é‡ | DPO | åŽ»è¶‹åŠ¿ä»·æ ¼æŒ¯è¡ |
| åŠ¨é‡ | Stochastic RSI | éšæœºRSI |
| åŠ¨é‡ | Fisher Transform | Fisherå˜æ¢ |
| æˆäº¤é‡ | OBV | èƒ½é‡æ½®æŒ‡æ ‡ |
| æˆäº¤é‡ | MFI | èµ„é‡‘æµé‡æŒ‡æ ‡ |
| æˆäº¤é‡ | VPT | é‡ä»·è¶‹åŠ¿ |
| æˆäº¤é‡ | VWAP | æˆäº¤é‡åŠ æƒå¹³å‡ä»· |
| æ³¢åŠ¨çŽ‡ | ATR | å¹³å‡çœŸå®žæ³¢å¹… |
| æ³¢åŠ¨çŽ‡ | Bollinger Bands | å¸ƒæž—å¸¦ |
| å…¶ä»– | Chandelier Exit | åŠç¯æ­¢æŸ |
| å…¶ä»– | ä»·æ ¼ä½ç½® | ä»·æ ¼ä½ç½®æŒ‡æ ‡ |
| å…¶ä»– | æ³¢åŠ¨çŽ‡æ¯”çŽ‡ | æ³¢åŠ¨çŽ‡æ¯”çŽ‡ |

## é€‰è‚¡é€»è¾‘

**å€™é€‰è‚¡ç¥¨æ¡ä»¶ï¼š**
1. æ”¶ç›˜ä»· + æœ€é«˜ä»·çªç ´60æ—¥é«˜ä½
2. MA20 > MA60 ä¸” MA60æ–œçŽ‡å‘ä¸Š
3. æˆäº¤é¢/20æ—¥å‡é¢ >= 1.2å€
4. ADX > 25ï¼ˆå¼ºè¶‹åŠ¿ï¼‰
5. KDJ-J <= 100ï¼ˆä¸è¿‡çƒ­ï¼‰
6. ä»·æ ¼ä½ç½® < 0.9ï¼ˆä¸åœ¨é«˜ä½ï¼‰
7. RSI14 <= 80

**æ­¢æŸ/æ­¢ç›ˆï¼š**
- ç¡¬æ­¢æŸï¼š-10%
- ATRæ­¢æŸï¼šå…¥åœºä»· - 2.5*ATRï¼ˆåŠ¨æ€è¿½è¸ªæ­¢æŸï¼‰
- ä¿æœ¬æ­¢ç›ˆï¼šç›ˆåˆ©10%åŽï¼Œæ­¢æŸä»·ç§»åŠ¨åˆ°æˆæœ¬ä»·
- æ­¢ç›ˆï¼š+25%
- æœ€å¤§æŒä»“ï¼š20å¤©

**å›žæµ‹é…ç½®ï¼š**
- æ»‘ç‚¹ï¼š0.1%
- æ‰‹ç»­è´¹ï¼š0.03%ï¼ˆåŒè¾¹ï¼‰
- æœ€å¤§æŒä»“æ•°é‡ï¼šå¯é…ç½®
- å•åªè‚¡ç¥¨ä»“ä½ï¼šå¯é…ç½®
- è°ƒä»“å‘¨æœŸï¼šå¯é…ç½®

## å›žæµ‹åŠŸèƒ½

### åŸºç¡€å›žæµ‹
```python
from analysis import BacktestEngine, BacktestConfig

config = BacktestConfig(
    start_date='20230101',
    end_date='20231231',
    initial_capital=1000000,
    max_positions=10,
    position_size=0.1,
    slippage=0.001,
    commission=0.0003,
    stop_loss=-0.10,
    take_profit=0.25,
    max_holding_days=20,
    rebalance_days=5
)

engine = BacktestEngine(config, strategy, fetcher)
result = engine.run()
```

### å‚æ•°ä¼˜åŒ–
```python
from analysis import ParameterOptimizer

param_grid = {
    'BREAKOUT_N': [40, 60, 80],
    'MA_FAST': [10, 20, 30],
    'MA_SLOW': [40, 60, 80],
    'VOL_CONFIRM_MULT': [1.2, 1.5, 2.0],
    'RSI_MAX': [70, 75, 80]
}

optimizer = ParameterOptimizer(fetcher, config)
results = optimizer.grid_search(param_grid)
```

### Walk-Forwardåˆ†æž
```python
# éªŒè¯å‚æ•°ç¨³å®šæ€§
wf_results = optimizer.walk_forward_analysis(
    train_days=252,    # è®­ç»ƒæœŸ1å¹´
    test_days=63,      # æµ‹è¯•æœŸ3ä¸ªæœˆ
    step_days=63        # æ»šåŠ¨æ­¥é•¿
)
```

### è´å¶æ–¯ä¼˜åŒ–
```python
# éšæœºæœç´¢ä¼˜åŒ–ï¼ˆç®€åŒ–ç‰ˆï¼‰
param_bounds = {
    'BREAKOUT_N': (20, 100),
    'MA_FAST': (5, 30),
    'MA_SLOW': (20, 100),
    'VOL_CONFIRM_MULT': (1.0, 3.0),
    'RSI_MAX': (60, 90)
}

best = optimizer.bayesian_optimization(param_bounds, n_iterations=50)
```

## æŠ¥å‘Šç”Ÿæˆ

### å›žæµ‹æŠ¥å‘Š
åŒ…å«ï¼š
- å›žæµ‹é…ç½®è¯¦æƒ…
- æ”¶ç›ŠæŒ‡æ ‡ï¼ˆæ€»æ”¶ç›ŠçŽ‡ã€å¹´åŒ–æ”¶ç›ŠçŽ‡ã€æœ€å¤§ç›ˆåˆ©/äºæŸï¼‰
- é£Žé™©æŒ‡æ ‡ï¼ˆæœ€å¤§å›žæ’¤ã€å¤æ™®æ¯”çŽ‡ã€Sortinoæ¯”çŽ‡ã€Calmaræ¯”çŽ‡ï¼‰
- äº¤æ˜“ç»Ÿè®¡ï¼ˆèƒœçŽ‡ã€ç›ˆäºæ¯”ã€å¹³å‡ç›ˆäºï¼‰
- æœˆåº¦æ”¶ç›Šåˆ†æž
- è¯¦ç»†äº¤æ˜“è®°å½•
- é€€å‡ºåŽŸå› ç»Ÿè®¡

### å‚æ•°ä¼˜åŒ–æŠ¥å‘Š
åŒ…å«ï¼š
- æœ€ä¼˜å‚æ•°ç»„åˆ
- Top 10å‚æ•°ç»„åˆè¯¦æƒ…
- å‚æ•°æ•æ„Ÿæ€§åˆ†æž
- æŒ‡æ ‡ç›¸å…³æ€§çŸ©é˜µ
- ç»Ÿè®¡æ‘˜è¦

### Walk-ForwardæŠ¥å‘Š
åŒ…å«ï¼š
- è®­ç»ƒæœŸ vs æµ‹è¯•æœŸè¡¨çŽ°å¯¹æ¯”
- å‚æ•°ç¨³å®šæ€§è¯„ä¼°
- è¡¨çŽ°ç›¸å…³æ€§åˆ†æž
- å„çª—å£è¯¦ç»†ç»“æžœ

## å¯è§†åŒ–ç³»ç»Ÿ

ç³»ç»Ÿæä¾›ä¸°å¯Œçš„å›¾è¡¨ç»˜åˆ¶åŠŸèƒ½ï¼ŒåŸºäºŽmatplotlibå’Œseabornã€‚

### è‚¡ç¥¨Kçº¿å›¾

ç»˜åˆ¶ä¸“ä¸šçš„è‚¡ç¥¨Kçº¿å›¾ï¼Œæ”¯æŒå¤šç§æŠ€æœ¯æŒ‡æ ‡å åŠ ï¼š

```python
from visualization import plot_stock_candlestick
from core import DataFetcher

fetcher = DataFetcher(token, rate_limiter)
df = fetcher.get_daily_by_date('000001.SZ', start_date='20240101', end_date='20240401')

# åŸºæœ¬Kçº¿å›¾
fig = plot_stock_candlestick(df, title="å¹³å®‰é“¶è¡Œ - Kçº¿å›¾")
plt.show()

# å¸¦æŒ‡æ ‡çš„Kçº¿å›¾
fig = plot_stock_candlestick(
    df,
    indicators=['ma', 'bollinger', 'volume', 'macd'],
    title="å¹³å®‰é“¶è¡Œ - å®Œæ•´åˆ†æž"
)
plt.show()

# ä¿å­˜å›¾è¡¨
plot_stock_candlestick(df, save_path='reports/stock_chart.png')
```

æ”¯æŒçš„æŒ‡æ ‡ï¼š
- `ma`: ç§»åŠ¨å¹³å‡çº¿ï¼ˆMA5ã€MA10ã€MA20ã€MA60ï¼‰
- `bollinger`: å¸ƒæž—å¸¦
- `volume`: æˆäº¤é‡æŸ±çŠ¶å›¾
- `macd`: MACDæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡å›¾

ç»˜åˆ¶å¤šç§æŠ€æœ¯æŒ‡æ ‡çš„è¶‹åŠ¿å’Œè¶…ä¹°è¶…å–ä¿¡å·ï¼š

```python
from visualization import plot_stock_indicators

# åŸºæœ¬æŒ‡æ ‡å›¾
fig = plot_stock_indicators(df, indicators=['rsi', 'kdj', 'cci', 'atr'])
plt.show()

# è‡ªå®šä¹‰æŒ‡æ ‡ç»„åˆ
fig = plot_stock_indicators(
    df,
    indicators=['rsi', 'atr'],
    figsize=(14, 6),
    save_path='reports/indicators.png'
)
```

æ”¯æŒçš„æŠ€æœ¯æŒ‡æ ‡ï¼š
- `rsi`: ç›¸å¯¹å¼ºå¼±æŒ‡æ ‡ï¼ˆå¸¦70/30è¶…ä¹°è¶…å–çº¿ï¼‰
- `kdj`: éšæœºæŒ‡æ ‡ï¼ˆå¸¦80/20è¶…ä¹°è¶…å–çº¿ï¼‰
- `cci`: é¡ºåŠ¿æŒ‡æ ‡ï¼ˆå¸¦Â±100è¶…ä¹°è¶…å–çº¿ï¼‰
- `atr`: å¹³å‡çœŸå®žæ³¢å¹…

### å›žæµ‹ç»“æžœå¯è§†åŒ–

å®Œæ•´çš„å›žæµ‹ç»“æžœåˆ†æžå›¾è¡¨ï¼š

```python
from visualization import plot_backtest_results

fig = plot_backtest_results(
    results,
    figsize=(16, 12),
    save_path='reports/backtest_results.png'
)
```

åŒ…å«çš„å›¾è¡¨ï¼š
1. å‡€å€¼æ›²çº¿ï¼ˆç­–ç•¥vsåŸºå‡†ï¼‰
2. å›žæ’¤æ›²çº¿
3. æ¯æœˆæ”¶ç›ŠçŽ‡çƒ­åŠ›å›¾
4. äº¤æ˜“æ”¶ç›ŠçŽ‡åˆ†å¸ƒå›¾

### å›žæ’¤åˆ†æžå›¾

è¯¦ç»†çš„å‡€å€¼ä¸Žå›žæ’¤åˆ†æžï¼š

```python
from visualization import plot_drawdown_chart

fig = plot_drawdown_chart(
    equity_curve,
    figsize=(14, 6),
    save_path='reports/drawdown_chart.png'
)
```

### æœˆåº¦æ”¶ç›Šåˆ†æž

æœˆåº¦å’Œå¹´åº¦æ”¶ç›ŠçŽ‡ç»Ÿè®¡ï¼š

```python
from visualization import plot_monthly_returns

fig = plot_monthly_returns(
    monthly_returns,
    figsize=(14, 8),
    save_path='reports/monthly_returns.png'
)
```

åŒ…å«ï¼š
1. æœˆåº¦æ”¶ç›ŠçŽ‡æŸ±çŠ¶å›¾
2. å¹´åº¦æ”¶ç›ŠçŽ‡æŸ±çŠ¶å›¾
3. ç»Ÿè®¡æŒ‡æ ‡æ‘˜è¦

### å‚æ•°ä¼˜åŒ–çƒ­åŠ›å›¾

å¯è§†åŒ–äºŒç»´å‚æ•°ç©ºé—´çš„ä¼˜åŒ–ç»“æžœï¼š

```python
from visualization import plot_parameter_heatmap

fig = plot_parameter_heatmap(
    optimization_results,
    param1='BREAKOUT_N',
    param2='MA_FAST',
    metric='total_return',
    figsize=(12, 8),
    save_path='reports/param_heatmap.png'
)
```

### å‚æ•°æ•æ„Ÿæ€§åˆ†æž

å¯¹æ¯”ä¸åŒå‚æ•°å¯¹ç­–ç•¥è¡¨çŽ°çš„å½±å“ï¼š

```python
from visualization import plot_parameter_sensitivity

fig = plot_parameter_sensitivity(
    optimization_results,
    params=['BREAKOUT_N', 'MA_FAST', 'RSI_MAX'],
    metric='sharpe_ratio',
    figsize=(14, 8),
    save_path='reports/param_sensitivity.png'
)
```

### å¯è§†åŒ–é…ç½®

å›¾è¡¨é£Žæ ¼è®¾ç½®ï¼š

```python
from visualization.plotter import Plotter

# è®¾ç½®ç»˜å›¾é£Žæ ¼
Plotter.setup_style(style='seaborn-v0_8-darkgrid')

# ä¿å­˜å›¾è¡¨
Plotter.save_figure(fig, 'path/to/chart.png', dpi=150)
```

## ç¼“å­˜å’Œå¹¶å‘ç³»ç»Ÿ

ç³»ç»Ÿæä¾›é«˜æ€§èƒ½çš„ç¼“å­˜æœºåˆ¶å’Œå¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œæ”¯æŒå¤šçº¿ç¨‹ã€æ‰¹é‡å¤„ç†å’Œæ™ºèƒ½ç¼“å­˜ç®¡ç†ã€‚

### ä¼˜åŒ–çš„ç¼“å­˜ç®¡ç†å™¨

åŸºäºŽLRUç­–ç•¥çš„ä¸¤çº§ç¼“å­˜ï¼ˆå†…å­˜+ç£ç›˜ï¼‰ï¼Œæ”¯æŒåŽ‹ç¼©å­˜å‚¨ï¼š

```python
from core.cache_manager_optimized import CacheManager

# åˆå§‹åŒ–ç¼“å­˜ç®¡ç†å™¨
cache = CacheManager(
    cache_dir="./cache",
    memory_cache_size=100,  # å†…å­˜ç¼“å­˜å®¹é‡
    enable_compression=True  # å¯ç”¨gzipåŽ‹ç¼©
)

# å­˜å‚¨æ•°æ®
cache.put('trade_cal', trade_days, 'key1')

# èŽ·å–æ•°æ®
result = cache.get('trade_cal', 'key1', ttl_days=7)

# æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
cache.print_cache_stats()

# æ¸…ç†ç¼“å­˜
cache.clear('trade_cal')  # æ¸…ç†ç‰¹å®šç±»åž‹
cache.clear()  # æ¸…ç†å…¨éƒ¨
```

ç¼“å­˜ç‰¹æ€§ï¼š
- **ä¸¤çº§ç¼“å­˜**: å†…å­˜ç¼“å­˜(å¿«é€Ÿ) + ç£ç›˜ç¼“å­˜(æŒä¹…åŒ–)
- **LRUç­–ç•¥**: è‡ªåŠ¨æ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®
- **åŽ‹ç¼©å­˜å‚¨**: ä½¿ç”¨gzipåŽ‹ç¼©ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´
- **çº¿ç¨‹å®‰å…¨**: æ”¯æŒå¤šçº¿ç¨‹å¹¶å‘è®¿é—®
- **ç»Ÿè®¡åŠŸèƒ½**: å®žæ—¶ç›‘æŽ§ç¼“å­˜å‘½ä¸­çŽ‡

### çº¿ç¨‹å®‰å…¨çš„é™æµå™¨

æ”¯æŒä¸¤ç§é™æµç®—æ³•ï¼š

#### æ»‘åŠ¨çª—å£é™æµå™¨

```python
from core.utils_optimized import RateLimiter

# åˆ›å»ºé™æµå™¨ï¼ˆæ¯åˆ†é’Ÿæœ€å¤š200æ¬¡è°ƒç”¨ï¼‰
limiter = RateLimiter(max_calls_per_minute=200)

# åœ¨APIè°ƒç”¨å‰ç­‰å¾…
limiter.wait_if_needed()
```

#### ä»¤ç‰Œæ¡¶é™æµå™¨ï¼ˆæ”¯æŒå¹¶å‘ï¼‰

```python
from core.utils_optimized import ConcurrentRateLimiter

# åˆ›å»ºä»¤ç‰Œæ¡¶é™æµå™¨ï¼ˆæ¯ç§’60ä¸ªä»¤ç‰Œï¼‰
limiter = ConcurrentRateLimiter(max_rate=60.0, capacity=60)

# èŽ·å–ä»¤ç‰Œï¼ˆè‡ªåŠ¨ç­‰å¾…ï¼‰
if limiter.acquire(timeout=10.0):
    # æ‰§è¡Œæ“ä½œ
    pass
```

### çº¿ç¨‹æ± å’Œæ‰¹é‡å¤„ç†å™¨

#### çº¿ç¨‹æ± å·¥å…·

```python
from core.utils_optimized import ThreadPool

# åˆ›å»ºçº¿ç¨‹æ± 
pool = ThreadPool(max_workers=4, rate_limiter=limiter)

# æäº¤å•ä¸ªä»»åŠ¡
future = pool.submit(some_function, arg1, arg2)
result = future.result()

# æ‰¹é‡å¤„ç†
results = pool.map(some_function, items_list)

pool.shutdown()
```

#### æ‰¹é‡å¤„ç†å™¨

```python
from core.utils_optimized import BatchProcessor

# åˆ›å»ºæ‰¹é‡å¤„ç†å™¨
processor = BatchProcessor(batch_size=100, max_workers=4)

# å¤„ç†é¡¹ç›®
results = processor.process(items, process_function)

# æŒ‰æ‰¹å¤„ç†
batch_results = processor.process_batches(items, batch_function)
```

### é‡è¯•è£…é¥°å™¨

è‡ªåŠ¨é‡è¯•å¤±è´¥çš„å‡½æ•°è°ƒç”¨ï¼š

```python
from core.utils_optimized import retry_on_failure

@retry_on_failure(max_retries=3, delay=1.0, backoff=2.0)
def fetch_data():
    # èŽ·å–æ•°æ®ï¼ˆè‡ªåŠ¨é‡è¯•æœ€å¤š3æ¬¡ï¼‰
    ...

result = fetch_data()
```

### ä¼˜åŒ–çš„æ•°æ®èŽ·å–å™¨

æ”¯æŒå¹¶å‘è¯·æ±‚ã€æ‰¹é‡èŽ·å–ã€è‡ªåŠ¨é‡è¯•ï¼š

```python
from core.data_fetcher_optimized import DataFetcherOptimized

# åˆå§‹åŒ–ä¼˜åŒ–çš„æ•°æ®èŽ·å–å™¨
fetcher = DataFetcherOptimized(
    token=token,
    use_concurrent_limiter=True,
    max_workers=4
)

# æ‰¹é‡èŽ·å–å¤šå¤©æ•°æ®
trade_dates = ['20240101', '20240102', '20240103']
daily_data = fetcher.get_daily_window(trade_dates)

# æ‰¹é‡èŽ·å–å¤šåªè‚¡ç¥¨æ•°æ®
ts_codes = ['000001.SZ', '000002.SZ', '600000.SH']
stock_data = fetcher.get_daily_batch_by_ts_codes(
    ts_codes, 
    start_date='20240101', 
    end_date='20240131'
)

# æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡
fetcher.print_cache_stats()

# æ¸…ç†èµ„æº
fetcher.shutdown()
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ä½¿ç”¨ä¼˜åŒ–çš„æ•°æ®èŽ·å–å™¨**: å¯¹äºŽéœ€è¦èŽ·å–å¤§é‡æ•°æ®çš„åœºæ™¯ï¼Œä½¿ç”¨`DataFetcherOptimized`
2. **åˆç†è®¾ç½®ç¼“å­˜å¤§å°**: å†…å­˜ç¼“å­˜å¤§å°å»ºè®®è®¾ç½®ä¸º100-200
3. **å¯ç”¨åŽ‹ç¼©**: å¯¹äºŽå¤§æ•°æ®é›†ï¼Œå¯ç”¨gzipåŽ‹ç¼©ä»¥èŠ‚çœç©ºé—´
4. **è°ƒæ•´å¹¶å‘æ•°**: æ ¹æ®APIé™åˆ¶å’Œç½‘ç»œæƒ…å†µè°ƒæ•´`max_workers`
5. **ç›‘æŽ§ç¼“å­˜å‘½ä¸­çŽ‡**: å®šæœŸæŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡ï¼Œä¼˜åŒ–ç¼“å­˜ç­–ç•¥

## æ—¥å¿—ç³»ç»Ÿ

ç³»ç»Ÿå†…ç½®å®Œæ•´çš„æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œæ”¯æŒå¤šçº§åˆ«æ—¥å¿—è¾“å‡ºã€‚

### æ—¥å¿—çº§åˆ«

- **DEBUG**: è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- **INFO**: ä¸€èˆ¬ä¿¡æ¯ï¼ˆé»˜è®¤çº§åˆ«ï¼‰
- **WARNING**: è­¦å‘Šä¿¡æ¯
- **ERROR**: é”™è¯¯ä¿¡æ¯
- **CRITICAL**: ä¸¥é‡é”™è¯¯

### æ—¥å¿—é…ç½®

åœ¨ `config/settings.py` ä¸­é…ç½®æ—¥å¿—å‚æ•°ï¼š

```python
LOG_LEVEL = "INFO"              # æ—¥å¿—çº§åˆ«
LOG_DIR = "./logs"              # æ—¥å¿—æ–‡ä»¶ç›®å½•
LOG_CONSOLE_OUTPUT = True       # æ˜¯å¦è¾“å‡ºåˆ°æŽ§åˆ¶å°
LOG_FILE_OUTPUT = True          # æ˜¯å¦è¾“å‡ºåˆ°æ–‡ä»¶
LOG_MAX_FILE_SIZE = 10 * 1024 * 1024  # å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼ˆå­—èŠ‚ï¼‰
LOG_BACKUP_COUNT = 5            # ä¿ç•™çš„æ—¥å¿—æ–‡ä»¶å¤‡ä»½æ•°é‡
```

### æ—¥å¿—æ–‡ä»¶

- ä¸»æ—¥å¿—æ–‡ä»¶ï¼š`logs/stock_system_YYYYMMDD.log`
- é”™è¯¯æ—¥å¿—æ–‡ä»¶ï¼š`logs/stock_system_error_YYYYMMDD.log`

æ—¥å¿—æ–‡ä»¶ä¼šè‡ªåŠ¨è½®è½¬ï¼Œè¶…è¿‡å¤§å°é™åˆ¶åŽè‡ªåŠ¨åˆ›å»ºæ–°æ–‡ä»¶ï¼Œæœ€å¤šä¿ç•™æŒ‡å®šæ•°é‡çš„å¤‡ä»½ã€‚

### ä½¿ç”¨ç¤ºä¾‹

```python
from core.logger import get_logger

# èŽ·å–loggerå®žä¾‹
logger = get_logger(__name__)

# è®°å½•ä¸åŒçº§åˆ«çš„æ—¥å¿—
logger.debug("è¿™æ˜¯è°ƒè¯•ä¿¡æ¯")
logger.info("è¿™æ˜¯æ™®é€šä¿¡æ¯")
logger.warning("è¿™æ˜¯è­¦å‘Šä¿¡æ¯")
logger.error("è¿™æ˜¯é”™è¯¯ä¿¡æ¯")
logger.critical("è¿™æ˜¯ä¸¥é‡é”™è¯¯ä¿¡æ¯")

# èŽ·å–æ¨¡å—ä¸“ç”¨logger
from core.logger import get_datafetcher_logger
df_logger = get_datafetcher_logger()
df_logger.info("DataFetcherä¸“ç”¨æ—¥å¿—")
```

## ä»£ç ç¤ºä¾‹

```python
from config.settings import BREAKOUT_N, TOP_N
from core import DataFetcher, RateLimiter, Logger
from core.logger import get_logger

# åˆå§‹åŒ–æ—¥å¿—ç³»ç»Ÿï¼ˆåœ¨ç¨‹åºå¯åŠ¨æ—¶è°ƒç”¨ä¸€æ¬¡ï¼‰
Logger.setup_logging(
    log_level="INFO",
    log_dir="./logs",
    console_output=True,
    file_output=True
)

# èŽ·å–logger
logger = get_logger(__name__)
from indicators import sma, atr, rsi
from strategy import StockStrategy
from analysis import BacktestEngine, ParameterOptimizer, Reporter

# åˆå§‹åŒ–
rate_limiter = RateLimiter(max_calls_per_minute=200)
fetcher = DataFetcher(token, rate_limiter)
basic_df = fetcher.get_stock_basic()
strategy = StockStrategy(basic_df)

# é€‰è‚¡
trade_date = '20240120'
daily_hist = fetcher.get_daily_window(trade_dates, 160)
top_stocks = strategy.analyze_stocks(daily_hist, market_ok=True)

# å›žæµ‹
config = BacktestConfig(
    start_date='20230101',
    end_date='20231231',
    initial_capital=1000000,
    max_positions=10,
    position_size=0.1,
    slippage=0.001,
    commission=0.0003,
    stop_loss=-0.10,
    take_profit=0.25,
    max_holding_days=20,
    rebalance_days=5
)
engine = BacktestEngine(config, strategy, fetcher)
results = engine.run()

# ç”ŸæˆæŠ¥å‘Š
backtest_report = Reporter.render_backtest_report(results, config)
print(backtest_report)

# å‚æ•°ä¼˜åŒ–
param_grid = {
    'BREAKOUT_N': [40, 60, 80],
    'MA_FAST': [10, 20],
    'MA_SLOW': [40, 60],
    'RSI_MAX': [70, 75]
}
optimizer = ParameterOptimizer(fetcher, config)
opt_results = optimizer.grid_search(param_grid)
opt_report = Reporter.render_optimization_report(opt_results, best_params)
print(opt_report)
```

## ç‰ˆæœ¬åŽ†å²

### v3.0.0 (æœ€æ–°)
- æ·»åŠ 30+ç§æ–°æŠ€æœ¯æŒ‡æ ‡ï¼Œæ€»è®¡60+ç§æŒ‡æ ‡
- æ–°å¢žé«˜çº§ç§»åŠ¨å¹³å‡çº¿ï¼šWMAã€DEMAã€TEMAã€Hull MA
- æ–°å¢žè¶‹åŠ¿æŒ‡æ ‡ï¼šSuperTrendã€Ichimoku Kinko Hyoã€Donchian Channelsã€Pivot Pointsã€Aroonã€Decycler
- æ–°å¢žåŒ…ç»œçº¿æŒ‡æ ‡ï¼šAcceleration Bandsã€Envelope SMA
- æ–°å¢žèƒŒç¦»æŒ‡æ ‡ï¼šRSI Divergence
- æ–°å¢žæˆäº¤é‡æŒ‡æ ‡ï¼šVolume Weighted MAã€Money Flow Ratioã€Ease of Movementã€Standardized Volumeã€Volume Profile
- æ–°å¢žåŠ¨é‡æŒ‡æ ‡ï¼šMass Indexã€Ultimate Oscillator
- æ–°å¢žå½¢æ€æŒ‡æ ‡ï¼šZigZagï¼ˆæ‘†åŠ¨ç‚¹æ£€æµ‹ï¼‰
- æ–°å¢žå›žå½’æŒ‡æ ‡ï¼šLinear Regression Slope/Intercept
- æ–°å¢žç»„åˆæŒ‡æ ‡ï¼šSqueeze Momentum
- é›†æˆscipyç§‘å­¦è®¡ç®—åº“
- æ·»åŠ æ‰©å±•æŠ€æœ¯æŒ‡æ ‡çš„å®Œæ•´æµ‹è¯•ç”¨ä¾‹ï¼ˆ7ä¸ªæµ‹è¯•ç±»ï¼Œ27ä¸ªæµ‹è¯•ï¼‰

### v2.9.0
- ä¼˜åŒ–å›žæµ‹æ€§èƒ½ - å®žçŽ°å‘é‡åŒ–è®¡ç®—å¼•æ“Žï¼ˆVectorizedBacktestEngineï¼‰
- å‘é‡åŒ–æŒ‡æ ‡è®¡ç®—ï¼ˆVectorizedMetricsï¼‰- ä½¿ç”¨NumPy/pandasåŠ é€Ÿ
- å‘é‡åŒ–æŒä»“æ£€æŸ¥ï¼ˆVectorizedPositionCheckerï¼‰- æ‰¹é‡å¤„ç†æ­¢æŸæ­¢ç›ˆ
- å®žçŽ°å¹¶è¡Œå›žæµ‹è¿è¡Œå™¨ï¼ˆParallelBacktestRunnerï¼‰
- æ”¯æŒå¤šå‚æ•°å¹¶è¡Œå›žæµ‹ï¼ŒåŠ é€Ÿå‚æ•°ä¼˜åŒ–è¿‡ç¨‹
- æä¾›æ‰¹é‡å›žæµ‹å‡½æ•°ï¼ˆvectorized_batch_backtestï¼‰
- æ·»åŠ å‘é‡åŒ–å›žæµ‹æ¨¡å—çš„å®Œæ•´æµ‹è¯•ç”¨ä¾‹ï¼ˆ5ä¸ªæµ‹è¯•ç±»ï¼Œ16ä¸ªæµ‹è¯•ï¼‰
- æ€§èƒ½æå‡ï¼šå‘é‡åŒ–è®¡ç®—é€Ÿåº¦æå‡5-10å€
- å…¼å®¹åŽŸæœ‰å›žæµ‹å¼•æ“Žï¼Œå¯æ— ç¼åˆ‡æ¢

### v2.8.0
- æ–°å¢žé…ç½®æ–‡ä»¶æ”¯æŒï¼ˆYAML/JSONæ ¼å¼ï¼‰
- å®žçŽ°çµæ´»çš„é…ç½®åŠ è½½å™¨ï¼ˆConfigLoaderï¼‰
- å®žçŽ°å…¨å±€é…ç½®ç®¡ç†å™¨ï¼ˆConfigå•ä¾‹æ¨¡å¼ï¼‰
- æ·»åŠ é…ç½®éªŒè¯å™¨ï¼ˆConfigValidatorï¼‰
- æ”¯æŒé…ç½®é¡¹ç±»åž‹éªŒè¯å’ŒèŒƒå›´æ£€æŸ¥
- æä¾›é…ç½®æ¨¡æ¿ç”ŸæˆåŠŸèƒ½
- æ”¯æŒè¿è¡Œæ—¶é…ç½®ä¿®æ”¹ï¼ˆä»…å†…å­˜ç”Ÿæ•ˆï¼‰
- å®žçŽ°é…ç½®çƒ­é‡è½½åŠŸèƒ½
- æ·»åŠ é…ç½®åŠ è½½å™¨å’Œç®¡ç†å™¨çš„å®Œæ•´æµ‹è¯•ç”¨ä¾‹ï¼ˆ11ä¸ªæµ‹è¯•ç±»ï¼Œ48ä¸ªæµ‹è¯•ï¼‰
- æä¾›é¡¹ç›®é»˜è®¤é…ç½®æ–‡ä»¶ï¼ˆconfig.yaml å’Œ config.jsonï¼‰

### v2.7.0
- ä¼˜åŒ–ç¼“å­˜æœºåˆ¶ - å®žçŽ°å†…å­˜ç¼“å­˜+LRUç­–ç•¥ï¼Œæå‡ç¼“å­˜å‘½ä¸­çŽ‡
- å®žçŽ°çº¿ç¨‹å®‰å…¨çš„é€ŸçŽ‡é™åˆ¶å™¨ï¼ˆä»¤ç‰Œæ¡¶ç®—æ³•ï¼‰
- å¢žå¼ºå¹¶å‘å¤„ç†èƒ½åŠ› - çº¿ç¨‹æ± ã€è¿›ç¨‹æ± ã€æ‰¹é‡å¤„ç†å™¨
- å®žçŽ°ä¼˜åŒ–çš„æ•°æ®èŽ·å–å™¨ - æ”¯æŒå¹¶å‘è¯·æ±‚ã€è‡ªåŠ¨é‡è¯•ã€æ‰¹é‡èŽ·å–
- æ·»åŠ ç¼“å­˜åŽ‹ç¼©åŠŸèƒ½ï¼ˆgzipï¼‰ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´
- å®žçŽ°é‡è¯•è£…é¥°å™¨ï¼Œè‡ªåŠ¨å¤„ç†APIè°ƒç”¨å¤±è´¥
- æ·»åŠ ç¼“å­˜å’Œå¹¶å‘æ¨¡å—çš„å®Œæ•´æµ‹è¯•ç”¨ä¾‹ï¼ˆ6ä¸ªæµ‹è¯•ç±»ï¼Œ21ä¸ªæµ‹è¯•ï¼‰
- æä¾›ç¼“å­˜ç»Ÿè®¡åŠŸèƒ½ï¼Œç›‘æŽ§ç¼“å­˜æ•ˆçŽ‡

### v2.6.0
- æ–°å¢žå¯è§†åŒ–å›¾è¡¨ç”Ÿæˆæ¨¡å—ï¼ˆvisualization/plotter.pyï¼‰
- å®žçŽ°è‚¡ç¥¨Kçº¿å›¾ç»˜åˆ¶ï¼ˆæ”¯æŒMAã€å¸ƒæž—å¸¦ã€æˆäº¤é‡ã€MACDï¼‰
- å®žçŽ°æŠ€æœ¯æŒ‡æ ‡å›¾ç»˜åˆ¶ï¼ˆRSIã€KDJã€CCIã€ATRï¼‰
- å®žçŽ°å›žæµ‹ç»“æžœå¯è§†åŒ–ï¼ˆå‡€å€¼æ›²çº¿ã€å›žæ’¤æ›²çº¿ã€æœˆåº¦æ”¶ç›Šçƒ­åŠ›å›¾ã€äº¤æ˜“åˆ†å¸ƒï¼‰
- å®žçŽ°å‚æ•°ä¼˜åŒ–çƒ­åŠ›å›¾ï¼ˆäºŒç»´å‚æ•°ç©ºé—´å¯è§†åŒ–ï¼‰
- å®žçŽ°å‚æ•°æ•æ„Ÿæ€§åˆ†æžå›¾ï¼ˆå¤šå‚æ•°å¯¹æ¯”åˆ†æžï¼‰
- æ·»åŠ å¯è§†åŒ–æ¨¡å—çš„å®Œæ•´æµ‹è¯•ç”¨ä¾‹ï¼ˆ8ä¸ªæµ‹è¯•ç±»ï¼Œ22ä¸ªæµ‹è¯•ï¼‰
- é›†æˆmatplotlibå’Œseabornå¯è§†åŒ–åº“

### v2.5.0
- æ–°å¢žæ•°æ®éªŒè¯æ¨¡å—ï¼ˆvalidators.pyï¼‰
- å®žçŽ°DataFrameéªŒè¯å™¨ï¼ˆåˆ—æ£€æŸ¥ã€ç±»åž‹éªŒè¯ã€è¡Œæ•°éªŒè¯ï¼‰
- å®žçŽ°ä»·æ ¼æ•°æ®éªŒè¯å™¨ï¼ˆOHLCæœ‰æ•ˆæ€§ã€æ­£æ•°æ£€æŸ¥ï¼‰
- å®žçŽ°æ—¥æœŸéªŒè¯å™¨ï¼ˆæ ¼å¼ã€èŒƒå›´ã€äº¤æ˜“æ—¥åˆ—è¡¨ï¼‰
- å®žçŽ°å‚æ•°éªŒè¯å™¨ï¼ˆæ­£æ•°ã€ç™¾åˆ†æ¯”ã€æ•´æ•°ã€å‘¨æœŸï¼‰
- å®žçŽ°é…ç½®éªŒè¯å™¨ï¼ˆå›žæµ‹é…ç½®éªŒè¯ï¼‰
- å®žçŽ°å®‰å…¨è®¡ç®—å™¨ï¼ˆé˜²é™¤é›¶ã€ç™¾åˆ†æ¯”å˜åŒ–ã€æ•°å€¼é™åˆ¶ï¼‰
- å¢žå¼ºDataFetcherçš„æ•°æ®éªŒè¯å’Œå¼‚å¸¸å¤„ç†
- å¢žå¼ºindicatorsæ¨¡å—çš„æ•°æ®éªŒè¯
- å¢žå¼ºstrategyæ¨¡å—çš„æ•°æ®éªŒè¯
- å¢žå¼ºbacktestæ¨¡å—çš„é…ç½®éªŒè¯å’Œå¼‚å¸¸å¤„ç†
- æ·»åŠ validatorsæ¨¡å—çš„å®Œæ•´æµ‹è¯•ç”¨ä¾‹ï¼ˆ10ä¸ªæµ‹è¯•ç±»ï¼‰

### v2.4.0
- æ–°å¢žå®Œæ•´çš„å•å…ƒæµ‹è¯•æ¡†æž¶ï¼ˆpytestï¼‰
- æ·»åŠ æŠ€æœ¯æŒ‡æ ‡æµ‹è¯•ç”¨ä¾‹ï¼ˆ11ä¸ªæŒ‡æ ‡æµ‹è¯•ç±»ï¼‰
- æ·»åŠ é…ç½®å‚æ•°æµ‹è¯•ç”¨ä¾‹
- æ·»åŠ æ—¥å¿—ç³»ç»Ÿæµ‹è¯•ç”¨ä¾‹
- åˆ›å»ºä¾¿æ·æµ‹è¯•è¿è¡Œè„šæœ¬ï¼ˆrun_tests.pyï¼‰
- æ·»åŠ æµ‹è¯•æ–‡æ¡£ï¼ˆTESTING.mdï¼‰
- é…ç½®pytestå’Œè¦†ç›–çŽ‡å·¥å…·

### v2.3.0
- æ–°å¢žå®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿï¼ˆæ”¯æŒå¤šçº§åˆ«ã€æ–‡ä»¶è¾“å‡ºã€æ—¥å¿—è½®è½¬ï¼‰
- å¢žå¼ºDataFetcheræ¨¡å—çš„æ—¥å¿—è®°å½•
- æ›´æ–°æ‰€æœ‰runnerè„šæœ¬ä»¥ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿ
- ä¼˜åŒ–.gitignoreé…ç½®

### v2.2.0
- æ–°å¢ž9ç§æŠ€æœ¯æŒ‡æ ‡ï¼ˆDPOã€TRIXã€Parabolic SARã€VWAPã€CCIã€Stochastic RSIã€VPTã€Vortexã€Fisher Transformï¼‰
- å®žçŽ°Walk-Forwardæ»šåŠ¨éªŒè¯åˆ†æž
- å¢žå¼ºå›žæµ‹å¼•æ“Žï¼ˆATRæ­¢æŸã€ä¿æœ¬æ­¢ç›ˆï¼‰
- æ·»åŠ è´å¶æ–¯ä¼˜åŒ–ï¼ˆéšæœºæœç´¢å®žçŽ°ï¼‰
- å®Œå–„æŠ¥å‘Šç”Ÿæˆï¼ˆå›žæµ‹æŠ¥å‘Šã€ä¼˜åŒ–æŠ¥å‘Šã€Walk-ForwardæŠ¥å‘Šï¼‰

### v2.1.0
- æ¨¡å—åŒ–é‡æž„ï¼Œæ¸…æ™°çš„ç›®å½•ç»“æž„
- å®žçŽ°å‚æ•°ç½‘æ ¼æœç´¢ä¼˜åŒ–
- å®Œå–„å›žæµ‹æ¡†æž¶ï¼ˆæ»‘ç‚¹ã€æ‰‹ç»­è´¹ã€æ­¢ç›ˆæ­¢æŸï¼‰

### v2.0.0
- æ–°å¢žå›žæµ‹å’Œå‚æ•°ä¼˜åŒ–åŠŸèƒ½
- æ‰©å……æŠ€æœ¯æŒ‡æ ‡åº“

### v1.0.0
- åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºç¡€é€‰è‚¡åŠŸèƒ½

## æ€§èƒ½æŒ‡æ ‡

å›žæµ‹ç³»ç»Ÿæä¾›ä¸°å¯Œçš„æ€§èƒ½æŒ‡æ ‡ï¼š

- **æ”¶ç›ŠæŒ‡æ ‡**: æ€»æ”¶ç›ŠçŽ‡ã€å¹´åŒ–æ”¶ç›ŠçŽ‡ã€å¹³å‡å•ç¬”æ”¶ç›Š
- **é£Žé™©æŒ‡æ ‡**: æœ€å¤§å›žæ’¤ã€å¤æ™®æ¯”çŽ‡ã€Sortinoæ¯”çŽ‡ã€Calmaræ¯”çŽ‡
- **äº¤æ˜“ç»Ÿè®¡**: èƒœçŽ‡ã€ç›ˆäºæ¯”ã€å¹³å‡ç›ˆåˆ©ã€å¹³å‡äºæŸ
- **ç¨³å®šæ€§æŒ‡æ ‡**: Walk-Forwardç›¸å…³æ€§ã€å‚æ•°ç¨³å®šæ€§

## å…è´£å£°æ˜Ž

æœ¬ç³»ç»Ÿä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸æž„æˆæŠ•èµ„å»ºè®®ã€‚å›žæµ‹ç»“æžœåŸºäºŽåŽ†å²æ•°æ®ï¼Œå®žé™…äº¤æ˜“å—æ»‘ç‚¹ã€æ‰‹ç»­è´¹ã€æµåŠ¨æ€§ç­‰å› ç´ å½±å“ï¼Œå¯èƒ½ä¸Žå›žæµ‹ç»“æžœå­˜åœ¨å·®å¼‚ã€‚å‚æ•°ä¼˜åŒ–å¯èƒ½å­˜åœ¨è¿‡æ‹Ÿåˆé£Žé™©ï¼Œå»ºè®®ä½¿ç”¨Walk-Forwardåˆ†æžéªŒè¯å‚æ•°ç¨³å®šæ€§ã€‚æŠ•èµ„æœ‰é£Žé™©ï¼Œå…¥å¸‚éœ€è°¨æ…Žã€‚

## è®¸å¯è¯

MIT License

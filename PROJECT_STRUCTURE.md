# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ æ ¹ç›®å½•æ–‡ä»¶

```
d:/PythonProject/Stock/
â”œâ”€â”€ README.md              # é¡¹ç›®è¯¦ç»†è¯´æ˜
â”œâ”€â”€ QUICK_START.md         # 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹æŒ‡å— â­
â”œâ”€â”€ DOCUMENTATION.md       # å®Œæ•´æ–‡æ¡£ç´¢å¼• â­
â”œâ”€â”€ PROJECT_STRUCTURE.md   # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”‚
â”œâ”€â”€ requirements.txt       # ä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ pytest.ini            # pytesté…ç½®
â”œâ”€â”€ run_tests.py          # æµ‹è¯•è¿è¡Œè„šæœ¬
â”œâ”€â”€ .gitignore            # Gitå¿½ç•¥æ–‡ä»¶é…ç½®
â”‚
â”œâ”€â”€ config.json           # JSONæ ¼å¼é…ç½®æ–‡ä»¶
â”œâ”€â”€ config.yaml           # YAMLæ ¼å¼é…ç½®æ–‡ä»¶
â””â”€â”€ app_config.py         # åº”ç”¨é…ç½®åŠ è½½å™¨
```

### ğŸ“– æ–‡æ¡£è¯´æ˜

| æ–‡æ¡£ | è¯´æ˜ | é€‚ç”¨äººç¾¤ |
|-----|------|---------|
| **QUICK_START.md** | 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹ | æ–°æ‰‹ã€å¿«é€Ÿä½“éªŒ |
| **README.md** | é¡¹ç›®è¯¦ç»†è¯´æ˜ | äº†è§£é¡¹ç›®è¯¦æƒ… |
| **DOCUMENTATION.md** | å®Œæ•´æ–‡æ¡£ç´¢å¼• | æŸ¥æ‰¾åŠŸèƒ½è¯´æ˜ |
| **PROJECT_STRUCTURE.md** | é¡¹ç›®ç»“æ„è¯´æ˜ | å¼€å‘è€… |

---

## ğŸ“ ç›®å½•ç»“æ„

```
Stock/
â”œâ”€â”€ ARCHIVE/               # å½’æ¡£æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ ARCHIVED_DOCS.md   # å·²å½’æ¡£æ–‡æ¡£ç´¢å¼•
â”‚
â”œâ”€â”€ config/                # é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config_loader.py   # é…ç½®åŠ è½½å™¨ï¼ˆæ”¯æŒYAML/JSONï¼‰
â”‚   â””â”€â”€ settings.py        # å…¨å±€é…ç½®å‚æ•°
â”‚
â”œâ”€â”€ core/                  # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ data_fetcher.py    # æ•°æ®è·å–ï¼ˆTushare APIï¼‰
â”‚   â”œâ”€â”€ cache_manager.py   # ç¼“å­˜ç®¡ç†ï¼ˆæ•´åˆç‰ˆï¼‰
â”‚   â”œâ”€â”€ logger.py          # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ validators.py      # æ•°æ®éªŒè¯å’Œå¼‚å¸¸å¤„ç†
â”‚   â”œâ”€â”€ utils.py           # å·¥å…·å‡½æ•°ï¼ˆé™æµå™¨ã€è¿›åº¦è¿½è¸ªï¼‰
â”‚   â”œâ”€â”€ data_quality.py    # æ•°æ®è´¨é‡æ£€æŸ¥
â”‚   â”œâ”€â”€ factors.py         # å› å­è®¡ç®—
â”‚   â”œâ”€â”€ factor_optimizer.py # å› å­ä¼˜åŒ–
â”‚   â”œâ”€â”€ ml_factors.py      # æœºå™¨å­¦ä¹ å› å­
â”‚   â”œâ”€â”€ monte_carlo.py     # è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿ
â”‚   â”œâ”€â”€ performance_metrics.py # æ€§èƒ½æŒ‡æ ‡
â”‚   â”œâ”€â”€ portfolio_optimizer.py # ç»„åˆä¼˜åŒ–
â”‚   â”œâ”€â”€ risk_manager.py    # é£é™©ç®¡ç†
â”‚   â”œâ”€â”€ dynamic_rebalancer.py # åŠ¨æ€å†å¹³è¡¡
â”‚   â”œâ”€â”€ strategy_fusion.py # ç­–ç•¥èåˆ
â”‚   â”œâ”€â”€ transaction_cost.py # äº¤æ˜“æˆæœ¬
â”‚   â”œâ”€â”€ backtest_enhanced.py # å¢å¼ºå›æµ‹
â”‚   â””â”€â”€ validators.py     # æ•°æ®éªŒè¯å™¨
â”‚
â”œâ”€â”€ indicators/            # æŠ€æœ¯æŒ‡æ ‡æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ indicators.py     # åŸºç¡€æŠ€æœ¯æŒ‡æ ‡
â”‚   â””â”€â”€ indicators_extended.py # æ‰©å±•æŠ€æœ¯æŒ‡æ ‡
â”‚
â”œâ”€â”€ strategy/              # ç­–ç•¥æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ strategy.py       # é€‰è‚¡ç­–ç•¥ï¼ˆæ•´åˆç‰ˆï¼‰
â”‚   â””â”€â”€ stock_query.py    # è‚¡ç¥¨æŸ¥è¯¢
â”‚
â”œâ”€â”€ analysis/             # åˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ backtest.py       # å›æµ‹å¼•æ“
â”‚   â”œâ”€â”€ backtest_vectorized.py # å‘é‡åŒ–å›æµ‹å¼•æ“
â”‚   â”œâ”€â”€ optimizer.py      # å‚æ•°ä¼˜åŒ–å™¨
â”‚   â””â”€â”€ reporter.py      # æŠ¥å‘Šç”Ÿæˆ
â”‚
â”œâ”€â”€ visualization/         # å¯è§†åŒ–æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ plotter.py       # å›¾è¡¨ç»˜åˆ¶
â”‚
â”œâ”€â”€ runners/              # è¿è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ interactive_menu.py   # äº¤äº’å¼èœå• â­
â”‚   â”œâ”€â”€ trend_radar_main.py   # ä¸»ç¨‹åºï¼ˆæ•´åˆç‰ˆï¼‰ â­
â”‚   â”œâ”€â”€ backtest_runner.py    # å›æµ‹è¿è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ backtest_demo.py      # å›æµ‹æ¼”ç¤º
â”‚   â””â”€â”€ optimizer_runner.py   # å‚æ•°ä¼˜åŒ–è„šæœ¬
â”‚
â”œâ”€â”€ tests/                 # æµ‹è¯•æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_indicators.py           # æŠ€æœ¯æŒ‡æ ‡æµ‹è¯•
â”‚   â”œâ”€â”€ test_indicators_extended.py   # æ‰©å±•æŒ‡æ ‡æµ‹è¯•
â”‚   â”œâ”€â”€ test_config_loader.py       # é…ç½®åŠ è½½å™¨æµ‹è¯•
â”‚   â”œâ”€â”€ test_config_manager.py      # é…ç½®ç®¡ç†æµ‹è¯•
â”‚   â”œâ”€â”€ test_logger.py              # æ—¥å¿—ç³»ç»Ÿæµ‹è¯•
â”‚   â”œâ”€â”€ test_validators.py          # æ•°æ®éªŒè¯æµ‹è¯•
â”‚   â”œâ”€â”€ test_data_quality.py        # æ•°æ®è´¨é‡æµ‹è¯•
â”‚   â”œâ”€â”€ test_factors.py             # å› å­æµ‹è¯•
â”‚   â”œâ”€â”€ test_performance_metrics.py  # æ€§èƒ½æŒ‡æ ‡æµ‹è¯•
â”‚   â”œâ”€â”€ test_transaction_cost.py    # äº¤æ˜“æˆæœ¬æµ‹è¯•
â”‚   â”œâ”€â”€ test_visualization.py       # å¯è§†åŒ–æµ‹è¯•
â”‚   â”œâ”€â”€ test_backtest_vectorized.py # å‘é‡åŒ–å›æµ‹æµ‹è¯•
â”‚   â””â”€â”€ test_cache_concurrent.py    # ç¼“å­˜å¹¶å‘æµ‹è¯•
â”‚
â”œâ”€â”€ cache/                 # ç¼“å­˜ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ trade_cal/         # äº¤æ˜“æ—¥å†ç¼“å­˜
â”‚   â”œâ”€â”€ stock_basic/       # è‚¡ç¥¨åŸºç¡€ä¿¡æ¯ç¼“å­˜
â”‚   â”œâ”€â”€ daily/             # æ—¥çº¿æ•°æ®ç¼“å­˜
â”‚   â””â”€â”€ index/             # æŒ‡æ•°æ•°æ®ç¼“å­˜
â”‚
â”œâ”€â”€ logs/                  # æ—¥å¿—ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ *.log             # æ—¥å¿—æ–‡ä»¶
â”‚
â”œâ”€â”€ reports/               # æŠ¥å‘Šç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ *.md              # Markdownæ ¼å¼æŠ¥å‘Š
â”‚
â””â”€â”€ .pytest_cache/         # pytestç¼“å­˜ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

---

## ğŸ“¦ æ¨¡å—è¯¦è§£

### 1. config/ - é…ç½®æ¨¡å—

**æ–‡ä»¶è¯´æ˜**:
- `config_loader.py`: é…ç½®åŠ è½½å™¨ï¼Œæ”¯æŒYAML/JSONæ ¼å¼
- `settings.py`: å…¨å±€é…ç½®å‚æ•°

**ä¸»è¦åŠŸèƒ½**:
- é…ç½®æ–‡ä»¶åŠ è½½å’ŒéªŒè¯
- çƒ­é‡è½½é…ç½®
- è¿è¡Œæ—¶é…ç½®ä¿®æ”¹
- é…ç½®æ¨¡æ¿ç”Ÿæˆ

---

### 2. core/ - æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

**æ–‡ä»¶è¯´æ˜**:
- `data_fetcher.py`: æ•°æ®è·å–å™¨ï¼ˆæ•´åˆç‰ˆï¼Œæ”¯æŒå¹¶å‘ï¼‰
- `cache_manager.py`: ç¼“å­˜ç®¡ç†å™¨ï¼ˆæ•´åˆç‰ˆï¼ŒLRU+å‹ç¼©ï¼‰
- `logger.py`: æ—¥å¿—ç³»ç»Ÿ
- `validators.py`: æ•°æ®éªŒè¯å™¨
- `utils.py`: å·¥å…·å‡½æ•°ï¼ˆé™æµå™¨ã€è¿›åº¦è¿½è¸ªï¼‰
- `data_quality.py`: æ•°æ®è´¨é‡æ£€æŸ¥
- `factors.py`: å› å­è®¡ç®—
- `factor_optimizer.py`: å› å­ä¼˜åŒ–
- `ml_factors.py`: æœºå™¨å­¦ä¹ å› å­
- `monte_carlo.py`: è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿ
- `performance_metrics.py`: æ€§èƒ½æŒ‡æ ‡
- `portfolio_optimizer.py`: ç»„åˆä¼˜åŒ–
- `risk_manager.py`: é£é™©ç®¡ç†
- `dynamic_rebalancer.py`: åŠ¨æ€å†å¹³è¡¡
- `strategy_fusion.py`: ç­–ç•¥èåˆ
- `transaction_cost.py`: äº¤æ˜“æˆæœ¬
- `backtest_enhanced.py`: å¢å¼ºå›æµ‹

**ä¸»è¦åŠŸèƒ½**:
- Tushare APIæ•°æ®è·å–
- ä¸¤çº§ç¼“å­˜ï¼ˆå†…å­˜+ç£ç›˜ï¼‰
- LRUç­–ç•¥å’Œå‹ç¼©å­˜å‚¨
- å¤šçº§åˆ«æ—¥å¿—è®°å½•
- å®Œæ•´çš„æ•°æ®éªŒè¯
- é™æµå’Œè¿›åº¦è¿½è¸ª
- å› å­è®¡ç®—å’Œä¼˜åŒ–
- æ€§èƒ½æŒ‡æ ‡è®¡ç®—
- é£é™©ç®¡ç†
- äº¤æ˜“æˆæœ¬è®¡ç®—

---

### 3. indicators/ - æŠ€æœ¯æŒ‡æ ‡æ¨¡å—

**æ–‡ä»¶è¯´æ˜**:
- `indicators.py`: åŸºç¡€æŠ€æœ¯æŒ‡æ ‡
- `indicators_extended.py`: æ‰©å±•æŠ€æœ¯æŒ‡æ ‡

**ä¸»è¦åŠŸèƒ½**:
- 60+ç§æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
- è¶‹åŠ¿ç±»æŒ‡æ ‡ï¼ˆSMA, EMA, MACD, ADXç­‰ï¼‰
- åŠ¨é‡ç±»æŒ‡æ ‡ï¼ˆRSI, KDJ, CCIç­‰ï¼‰
- æˆäº¤é‡ç±»æŒ‡æ ‡ï¼ˆOBV, MFI, VPTç­‰ï¼‰
- æ³¢åŠ¨ç‡ç±»æŒ‡æ ‡ï¼ˆATR, Bollinger Bandsç­‰ï¼‰

---

### 4. strategy/ - ç­–ç•¥æ¨¡å—

**æ–‡ä»¶è¯´æ˜**:
- `strategy.py`: é€‰è‚¡ç­–ç•¥ï¼ˆæ•´åˆç‰ˆï¼‰
- `stock_query.py`: è‚¡ç¥¨æŸ¥è¯¢

**ä¸»è¦åŠŸèƒ½**:
- å¤šå› å­é€‰è‚¡
- è¶‹åŠ¿é›·è¾¾ç­–ç•¥
- å¸‚åœºç¯å¢ƒåˆ¤æ–­
- è‚¡ç¥¨ä¿¡æ¯æŸ¥è¯¢

---

### 5. analysis/ - åˆ†ææ¨¡å—

**æ–‡ä»¶è¯´æ˜**:
- `backtest.py`: åŸºç¡€å›æµ‹å¼•æ“
- `backtest_vectorized.py`: å‘é‡åŒ–å›æµ‹å¼•æ“
- `optimizer.py`: å‚æ•°ä¼˜åŒ–å™¨
- `reporter.py`: æŠ¥å‘Šç”Ÿæˆå™¨

**ä¸»è¦åŠŸèƒ½**:
- å®Œæ•´çš„å›æµ‹å¼•æ“
- å‘é‡åŒ–è®¡ç®—ï¼ˆ5-10å€æ€§èƒ½æå‡ï¼‰
- ç½‘æ ¼æœç´¢ä¼˜åŒ–
- è´å¶æ–¯ä¼˜åŒ–
- Walk-ForwardéªŒè¯
- MarkdownæŠ¥å‘Šç”Ÿæˆ

---

### 6. visualization/ - å¯è§†åŒ–æ¨¡å—

**æ–‡ä»¶è¯´æ˜**:
- `plotter.py`: å›¾è¡¨ç»˜åˆ¶

**ä¸»è¦åŠŸèƒ½**:
- è‚¡ç¥¨Kçº¿å›¾
- æŠ€æœ¯æŒ‡æ ‡å›¾
- å›æµ‹ç»“æœå¯è§†åŒ–
- å‚æ•°ä¼˜åŒ–çƒ­åŠ›å›¾
- æœˆåº¦æ”¶ç›Šåˆ†æ

---

### 7. runners/ - è¿è¡Œè„šæœ¬

**æ–‡ä»¶è¯´æ˜**:
- `interactive_menu.py`: äº¤äº’å¼èœå•
- `trend_radar_main.py`: ä¸»ç¨‹åºï¼ˆæ•´åˆç‰ˆï¼‰
- `backtest_runner.py`: å›æµ‹è¿è¡Œè„šæœ¬
- `backtest_demo.py`: å›æµ‹æ¼”ç¤º
- `optimizer_runner.py`: å‚æ•°ä¼˜åŒ–è„šæœ¬

**ä¸»è¦åŠŸèƒ½**:
- äº¤äº’å¼èœå•ç•Œé¢
- å•æ—¥é€‰è‚¡
- å†å²å›æµ‹
- å‚æ•°ä¼˜åŒ–
- åŠŸèƒ½æ¼”ç¤º

---

### 8. tests/ - æµ‹è¯•æ¨¡å—

**æ–‡ä»¶è¯´æ˜**:
- 15ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œ200+æµ‹è¯•ç”¨ä¾‹

**ä¸»è¦åŠŸèƒ½**:
- æŠ€æœ¯æŒ‡æ ‡æµ‹è¯•
- é…ç½®ç®¡ç†æµ‹è¯•
- æ—¥å¿—ç³»ç»Ÿæµ‹è¯•
- æ•°æ®éªŒè¯æµ‹è¯•
- å‘é‡åŒ–å›æµ‹æµ‹è¯•
- ç¼“å­˜å¹¶å‘æµ‹è¯•
- å¯è§†åŒ–æµ‹è¯•

---

## ğŸ”— ä¾èµ–å…³ç³»

```
trend_radar_main.py (äº¤äº’å¼èœå•)
    â”œâ”€â”€ config/
    â”œâ”€â”€ core/
    â”‚   â”œâ”€â”€ data_fetcher.py
    â”‚   â”œâ”€â”€ cache_manager.py
    â”‚   â”œâ”€â”€ logger.py
    â”‚   â”œâ”€â”€ validators.py
    â”‚   â””â”€â”€ utils.py
    â”œâ”€â”€ indicators/
    â”œâ”€â”€ strategy/
    â”‚   â”œâ”€â”€ strategy.py
    â”‚   â””â”€â”€ stock_query.py
    â””â”€â”€ analysis/
        â”œâ”€â”€ backtest.py
        â”œâ”€â”€ backtest_vectorized.py
        â”œâ”€â”€ optimizer.py
        â””â”€â”€ reporter.py
```

---

## ğŸ“ æ‰©å±•å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æŠ€æœ¯æŒ‡æ ‡

1. åœ¨ `indicators/indicators.py` æˆ– `indicators/indicators_extended.py` ä¸­æ·»åŠ å‡½æ•°
2. åœ¨ `__init__.py` ä¸­å¯¼å‡ºå‡½æ•°
3. åœ¨ `tests/test_indicators.py` ä¸­æ·»åŠ æµ‹è¯•ç”¨ä¾‹

### æ·»åŠ æ–°çš„é€‰è‚¡ç­–ç•¥

1. åœ¨ `strategy/` ä¸­åˆ›å»ºæ–°çš„ç­–ç•¥æ–‡ä»¶
2. ç»§æ‰¿æˆ–å‚è€ƒ `StockStrategy` ç±»
3. åœ¨ `runners/` ä¸­åˆ›å»ºè¿è¡Œè„šæœ¬

### æ·»åŠ æ–°çš„å¯è§†åŒ–å›¾è¡¨

1. åœ¨ `visualization/plotter.py` ä¸­æ·»åŠ ç»˜å›¾å‡½æ•°
2. åœ¨ `tests/test_visualization.py` ä¸­æ·»åŠ æµ‹è¯•ç”¨ä¾‹

### æ·»åŠ æ–°çš„å›æµ‹åŠŸèƒ½

1. åœ¨ `analysis/` ä¸­æ·»åŠ å›æµ‹ç›¸å…³å‡½æ•°
2. æ›´æ–° `analysis/__init__.py`
3. æ·»åŠ æµ‹è¯•ç”¨ä¾‹

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ•°æ®ç±»å‹ä¼˜åŒ–**: ä½¿ç”¨ `float32` æ›¿ä»£ `float64`
2. **å‘é‡åŒ–è®¡ç®—**: ä½¿ç”¨ NumPy/pandas å‘é‡åŒ–æ“ä½œ
3. **ç¼“å­˜ä¼˜åŒ–**: å¯ç”¨LRUç¼“å­˜å’Œå‹ç¼©å­˜å‚¨
4. **å¹¶å‘å¤„ç†**: ä½¿ç”¨çº¿ç¨‹æ± å’Œæ‰¹é‡å¤„ç†å™¨
5. **å¹¶è¡Œå›æµ‹**: ä½¿ç”¨ `VectorizedBacktestEngine` å’Œ `ParallelBacktestRunner`

---

## ğŸ› ï¸ å¸¸è§å¼€å‘ä»»åŠ¡

### ä¿®æ”¹é€‰è‚¡å‚æ•°
ç¼–è¾‘ `config/settings.py` ä¸­çš„å…¨å±€é…ç½®

### æ·»åŠ æ–°çš„æŠ€æœ¯æŒ‡æ ‡
åœ¨ `indicators/` ç›®å½•ä¸‹æ·»åŠ å‡½æ•°å¹¶å¯¼å‡º

### ä¿®æ”¹å›æµ‹é€»è¾‘
ç¼–è¾‘ `analysis/backtest.py` æˆ– `analysis/backtest_vectorized.py`

### æ·»åŠ æ–°çš„å¯è§†åŒ–
åœ¨ `visualization/plotter.py` ä¸­æ·»åŠ ç»˜å›¾å‡½æ•°

### è¿è¡Œæµ‹è¯•
```bash
python run_tests.py
```

---

**æœ€åæ›´æ–°**: 2026-01-21
